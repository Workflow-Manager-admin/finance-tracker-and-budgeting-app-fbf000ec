{"is_source_file": true, "format": "Python", "description": "This file implements REST API endpoints for handling transactions, dashboard data, categories, and analytics within a finance tracking backend. It defines data models, in-memory data storage, and route handlers for creating, retrieving, updating, deleting transactions, as well as summary and analytics endpoints.", "external_files": ["./auth"], "external_methods": ["get_current_user"], "published": ["/transactions", "/transactions/{transaction_id}", "/dashboard/recent", "/categories/summary", "/analytics/budget"], "classes": [{"name": "TransactionBase", "description": "Base model for transaction data, including amount, currency, category, type, date, and optional description."}, {"name": "TransactionCreate", "description": "Model for creating a new transaction, inherits from TransactionBase."}, {"name": "TransactionUpdate", "description": "Model for updating a transaction with full data, inherits from TransactionBase."}, {"name": "TransactionPartialUpdate", "description": "Model for partial updates to a transaction, all fields optional."}, {"name": "Transaction", "description": "Model representing a transaction with ID and user_id included."}, {"name": "TransactionListResponse", "description": "Response model containing a list of transactions and total count."}, {"name": "CategorySummaryItem", "description": "Model for representing total spent per category."}, {"name": "CategorySummaryResponse", "description": "Response model for categories spending summary."}, {"name": "CategoryBreakdownItem", "description": "Model for detailed category spend and budget info."}, {"name": "BudgetAnalyticsResponse", "description": "Model for overall budget and category breakdown analytics."}, {"name": "DashboardRecentResponse", "description": "Model for recent transactions to display on dashboard."}], "methods": [{"name": "list_transactions( limit: int = Query(20, ge=1, le=100), offset: int = Query(0, ge=0), current_user: User = Depends(get_current_user) )", "description": "Fetches list of transactions for current user with pagination.", "scope": "", "scopeKind": ""}, {"name": "create_transaction( tx_create: TransactionCreate, current_user: User = Depends(get_current_user) )", "description": "Creates a new transaction for the current user.", "scope": "", "scopeKind": ""}, {"name": "get_transaction( transaction_id: str, current_user: User = Depends(get_current_user) )", "description": "Retrieves a single transaction by ID for current user.", "scope": "", "scopeKind": ""}, {"name": "update_transaction_put( transaction_id: str, tx_update: TransactionUpdate, current_user: User = Depends(get_current_user) )", "description": "Fully updates a transaction (PUT).", "scope": "", "scopeKind": ""}, {"name": "update_transaction_patch( transaction_id: str, tx_pupdate: TransactionPartialUpdate, current_user: User = Depends(get_current_user) )", "description": "Partially updates a transaction (PATCH).", "scope": "", "scopeKind": ""}, {"name": "delete_transaction( transaction_id: str, current_user: User = Depends(get_current_user) )", "description": "Deletes a transaction by ID.", "scope": "", "scopeKind": ""}, {"name": "dashboard_recent( count: int = Query(5, ge=1, le=20), current_user: User = Depends(get_current_user) )", "description": "Returns the most recent transactions for dashboard display.", "scope": "", "scopeKind": ""}, {"name": "categories_summary( current_user: User = Depends(get_current_user) )", "description": "Provides total spent grouped by category.", "scope": "", "scopeKind": ""}, {"name": "analytics_budget( current_user: User = Depends(get_current_user), )", "description": "Provides budget vs. actual spending analytics for the current month.", "scope": "", "scopeKind": ""}, {"name": "Optional[Transaction] get_transaction_by_id(user_id: str, tx_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[Transaction] get_transactions_for_user(user_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool remove_transaction_for_user(user_id: str, transaction_id: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "save_transaction_for_user(user_id: str, transaction: Transaction)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[Transaction] update_transaction(user_id: str, tx_id: str, tx_data: Dict[str, Any], patch: bool = False)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["get_transactions_for_user", "save_transaction_for_user", "remove_transaction_for_user", "get_transaction_by_id", "update_transaction"], "search-terms": ["Transaction", "API", "budget", "category", "dashboard", "analytics", "in-memory database", "FastAPI", "REST endpoints", "transactions", "categories", "budget analytics"], "state": 2, "file_id": 14, "knowledge_revision": 29, "git_revision": "", "ctags": [{"_type": "tag", "name": "BudgetAnalyticsResponse", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^class BudgetAnalyticsResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CategoryBreakdownItem", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^class CategoryBreakdownItem(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CategorySummaryItem", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^class CategorySummaryItem(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CategorySummaryResponse", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^class CategorySummaryResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DEFAULT_TOTAL_BUDGET", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^DEFAULT_TOTAL_BUDGET = 500$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DashboardRecentResponse", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^class DashboardRecentResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Transaction", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^class Transaction(TransactionBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TransactionBase", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^class TransactionBase(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TransactionCreate", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^class TransactionCreate(TransactionBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TransactionListResponse", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^class TransactionListResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TransactionPartialUpdate", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^class TransactionPartialUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TransactionUpdate", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^class TransactionUpdate(TransactionBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "amount", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^    amount: float = Field(..., description=\"Amount of the transaction\")$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "TransactionBase", "scopeKind": "class"}, {"_type": "tag", "name": "analytics_budget", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^async def analytics_budget($/", "language": "Python", "kind": "function", "signature": "( current_user: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "categories_summary", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^async def categories_summary($/", "language": "Python", "kind": "function", "signature": "( current_user: User = Depends(get_current_user) )"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^    category: str = Field(..., description=\"Category name, e.g. 'Food'\", example=\"Food\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TransactionBase", "scopeKind": "class"}, {"_type": "tag", "name": "category_budgets", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^category_budgets = {$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "create_transaction", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^async def create_transaction($/", "language": "Python", "kind": "function", "signature": "( tx_create: TransactionCreate, current_user: User = Depends(get_current_user) )"}, {"_type": "tag", "name": "currency", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^    currency: str = Field(..., description=\"Currency code, e.g. 'USD'\", example=\"USD\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TransactionBase", "scopeKind": "class"}, {"_type": "tag", "name": "dashboard_recent", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^async def dashboard_recent($/", "language": "Python", "kind": "function", "signature": "( count: int = Query(5, ge=1, le=20), current_user: User = Depends(get_current_user) )"}, {"_type": "tag", "name": "date", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^    date: datetime = Field(..., description=\"Datetime of the transaction\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "TransactionBase", "scopeKind": "class"}, {"_type": "tag", "name": "delete_transaction", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^async def delete_transaction($/", "language": "Python", "kind": "function", "signature": "( transaction_id: str, current_user: User = Depends(get_current_user) )"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^    description: Optional[str] = Field(None, description=\"Transaction description\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TransactionBase", "scopeKind": "class"}, {"_type": "tag", "name": "fake_transactions_db", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^fake_transactions_db: Dict[str, List[Transaction]] = {}  # user_id: [Transaction]$/", "language": "Python", "typeref": "typename:Dict[str, List[Transaction]]", "kind": "variable"}, {"_type": "tag", "name": "get_transaction", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^async def get_transaction($/", "language": "Python", "kind": "function", "signature": "( transaction_id: str, current_user: User = Depends(get_current_user) )"}, {"_type": "tag", "name": "get_transaction_by_id", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^def get_transaction_by_id(user_id: str, tx_id: str) -> Optional[Transaction]:$/", "language": "Python", "typeref": "typename:Optional[Transaction]", "kind": "function", "signature": "(user_id: str, tx_id: str)"}, {"_type": "tag", "name": "get_transactions_for_user", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^def get_transactions_for_user(user_id: str) -> List[Transaction]:$/", "language": "Python", "typeref": "typename:List[Transaction]", "kind": "function", "signature": "(user_id: str)"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^    id: str = Field(..., description=\"Transaction ID\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}, {"_type": "tag", "name": "list_transactions", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^async def list_transactions($/", "language": "Python", "kind": "function", "signature": "( limit: int = Query(20, ge=1, le=100), offset: int = Query(0, ge=0), current_user: User = Depends(get_current_user) )"}, {"_type": "tag", "name": "remove_transaction_for_user", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^def remove_transaction_for_user(user_id: str, transaction_id: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(user_id: str, transaction_id: str)"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^router = APIRouter(tags=[\"Transactions\", \"Dashboard\", \"Categories\", \"Analytics\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "save_transaction_for_user", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^def save_transaction_for_user(user_id: str, transaction: Transaction):$/", "language": "Python", "kind": "function", "signature": "(user_id: str, transaction: Transaction)"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^    type: str = Field(..., description=\"Transaction type ('income' or 'expense')\", example=\"expe/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TransactionBase", "scopeKind": "class"}, {"_type": "tag", "name": "update_transaction", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^def update_transaction(user_id: str, tx_id: str, tx_data: Dict[str, Any], patch: bool = False) -/", "language": "Python", "typeref": "typename:Optional[Transaction]", "kind": "function", "signature": "(user_id: str, tx_id: str, tx_data: Dict[str, Any], patch: bool = False)"}, {"_type": "tag", "name": "update_transaction_patch", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^async def update_transaction_patch($/", "language": "Python", "kind": "function", "signature": "( transaction_id: str, tx_pupdate: TransactionPartialUpdate, current_user: User = Depends(get_current_user) )"}, {"_type": "tag", "name": "update_transaction_put", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^async def update_transaction_put($/", "language": "Python", "kind": "function", "signature": "( transaction_id: str, tx_update: TransactionUpdate, current_user: User = Depends(get_current_user) )"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-fbf000ec/finance_tracker_backend/src/api/transactions.py", "pattern": "/^    user_id: str = Field(..., description=\"User ID transaction belongs to\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}], "hash": "35c95999f2a809b1af6c384090a56230", "format-version": 4, "code-base-name": "finance_tracker_backend", "filename": "finance_tracker_backend/src/api/transactions.py", "fields": [{"name": "DEFAULT_TOTAL_BUDGET = 500", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "float amount", "scope": "TransactionBase", "scopeKind": "class", "description": "unavailable"}, {"name": "str category", "scope": "TransactionBase", "scopeKind": "class", "description": "unavailable"}, {"name": "category_budgets = {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str currency", "scope": "TransactionBase", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime date", "scope": "TransactionBase", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "TransactionBase", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str, List[Transaction]] fake_transactions_db", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str id", "scope": "Transaction", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(tags=[\"Transactions\", \"Dashboard\", \"Categories\", \"Analytics\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str type", "scope": "TransactionBase", "scopeKind": "class", "description": "unavailable"}, {"name": "str user_id", "scope": "Transaction", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"29": ""}]}